# Supabaseæ•°æ®åº“è¿ç§»æ€»ç»“

## æ¦‚è¿°
å·²æˆåŠŸå°†æ‰€æœ‰n8nå·¥ä½œæµï¼ˆé™¤æ™ºèƒ½é—®ç­”å¤–ï¼‰ä»HTTPè¯·æ±‚æ–¹å¼æ›´æ–°ä¸ºä½¿ç”¨SupabaseèŠ‚ç‚¹ï¼Œæé«˜äº†å·¥ä½œæµçš„å¯ç»´æŠ¤æ€§å’Œå¯é æ€§ã€‚

## æ›´æ–°çš„å·¥ä½œæµ

### 1. âœ… å­¦ä¹ å»ºè®®å·¥ä½œæµ (learning-advice.json)
**çŠ¶æ€**: å·²ä½¿ç”¨SupabaseèŠ‚ç‚¹
- ä½¿ç”¨SupabaseèŠ‚ç‚¹æŸ¥è¯¢: `user_progress`, `learning_stats`, `ai_sessions`, `courses`
- æ— éœ€ä¿®æ”¹

### 2. âœ… ä¸ªæ€§åŒ–æ¨èå·¥ä½œæµ (personalized-recommendations.json)
**çŠ¶æ€**: å·²ä½¿ç”¨SupabaseèŠ‚ç‚¹
- ä½¿ç”¨SupabaseèŠ‚ç‚¹æŸ¥è¯¢: `user_progress`, `courses`, `users`, `ai_sessions`
- æ— éœ€ä¿®æ”¹

### 3. ğŸ”„ å­¦ä¹ è¿›åº¦è·Ÿè¸ªå·¥ä½œæµ (learning-progress-tracker.json)
**çŠ¶æ€**: å·²æ›´æ–°ä¸ºSupabaseèŠ‚ç‚¹
**æ›´æ–°å†…å®¹**:
- `æ›´æ–°å­¦ä¹ è¿›åº¦` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase create (upsert)
- `è·å–è¯¾ç¨‹æ€»è¿›åº¦` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase get (å¸¦è¿‡æ»¤æ¡ä»¶)
- `æ›´æ–°æ¯æ—¥ç»Ÿè®¡` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase create (upsert)

### 4. ğŸ”„ OKRè¿›åº¦è‡ªåŠ¨æ›´æ–°å·¥ä½œæµ (okr-progress-updater.json)
**çŠ¶æ€**: å·²æ›´æ–°ä¸ºSupabaseèŠ‚ç‚¹
**æ›´æ–°å†…å®¹**:
- `è·å–æ´»è·ƒOKR` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase get (è¿‡æ»¤activeçŠ¶æ€)
- `è·å–å·²å®Œæˆè¯¾ç¨‹` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase get (è¿‡æ»¤progress>=100)
- `è·å–å­¦ä¹ ç»Ÿè®¡` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase get (è¿‡æ»¤æœ€è¿‘30å¤©)
- `æ›´æ–°OKRè¿›åº¦` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase update
- `è®°å½•è¿›åº¦å†å²` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase create

### 5. ğŸ”„ æ™ºèƒ½å­¦ä¹ åˆ†æå·¥ä½œæµ (smart-learning-analytics.json)
**çŠ¶æ€**: å·²æ›´æ–°ä¸ºSupabaseèŠ‚ç‚¹
**æ›´æ–°å†…å®¹**:
- `è·å–å­¦ä¹ ç»Ÿè®¡` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase get (æŒ‰ç”¨æˆ·IDå’Œæ—¥æœŸè¿‡æ»¤)
- `è·å–è¿›åº¦æ•°æ®` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase get (æŒ‰ç”¨æˆ·IDè¿‡æ»¤)
- `è·å–OKRæ•°æ®` èŠ‚ç‚¹: HTTPè¯·æ±‚ â†’ Supabase get (è¿‡æ»¤activeçŠ¶æ€)

### 6. â• æ–°å¢: Supabaseè¿æ¥æµ‹è¯•å·¥ä½œæµ (supabase-connection-test.json)
**åŠŸèƒ½**: æµ‹è¯•Supabaseæ•°æ®åº“è¿æ¥
**åŒ…å«èŠ‚ç‚¹**:
- Manual Trigger (æ‰‹åŠ¨è§¦å‘)
- Query Users Table (æŸ¥è¯¢ç”¨æˆ·è¡¨)
- Check Connection Success (æ£€æŸ¥è¿æ¥æˆåŠŸ)
- Success/Failure Result (æˆåŠŸ/å¤±è´¥ç»“æœ)

## æŠ€æœ¯æ”¹è¿›

### ä¼˜åŠ¿
1. **ç»Ÿä¸€æ€§**: æ‰€æœ‰å·¥ä½œæµç°åœ¨éƒ½ä½¿ç”¨ç›¸åŒçš„SupabaseèŠ‚ç‚¹
2. **å¯ç»´æŠ¤æ€§**: å‡å°‘äº†HTTPè¯·æ±‚çš„å¤æ‚é…ç½®
3. **å¯é æ€§**: SupabaseèŠ‚ç‚¹æä¾›æ›´å¥½çš„é”™è¯¯å¤„ç†
4. **å®‰å…¨æ€§**: å‡­æ®ç®¡ç†æ›´åŠ é›†ä¸­å’Œå®‰å…¨
5. **æ€§èƒ½**: å‡å°‘äº†æ‰‹åŠ¨æ„å»ºHTTPè¯·æ±‚çš„å¼€é”€

### å‡­æ®é…ç½®
æ‰€æœ‰å·¥ä½œæµéƒ½ä½¿ç”¨ç»Ÿä¸€çš„å‡­æ®é…ç½®:
```json
"credentials": {
  "supabaseApi": {
    "id": "supabase-credentials",
    "name": "supabase-credentials"
  }
}
```

### æ•°æ®åº“è¡¨æ˜ å°„
å·¥ä½œæµä¸­ä½¿ç”¨çš„ä¸»è¦æ•°æ®åº“è¡¨:
- `users` - ç”¨æˆ·ä¿¡æ¯
- `user_progress` - å­¦ä¹ è¿›åº¦
- `learning_stats` - å­¦ä¹ ç»Ÿè®¡
- `courses` - è¯¾ç¨‹ä¿¡æ¯
- `ai_sessions` - AIäº¤äº’è®°å½•
- `okrs` - OKRç›®æ ‡
- `okr_progress` - OKRè¿›åº¦å†å²

## ä½¿ç”¨è¯´æ˜

### å¯¼å…¥å·¥ä½œæµ
1. åœ¨n8nä¸­é€‰æ‹© "Import from File"
2. é€‰æ‹©å¯¹åº”çš„JSONæ–‡ä»¶
3. ç¡®ä¿Supabaseå‡­æ®é…ç½®æ­£ç¡®

### æµ‹è¯•è¿æ¥
1. é¦–å…ˆè¿è¡Œ `supabase-connection-test.json` å·¥ä½œæµ
2. ç¡®è®¤æ•°æ®åº“è¿æ¥æ­£å¸¸
3. å†è¿è¡Œå…¶ä»–ä¸šåŠ¡å·¥ä½œæµ

### å‡­æ®è®¾ç½®
ç¡®ä¿åœ¨n8nä¸­é…ç½®äº†åä¸º `supabase-credentials` çš„Supabase APIå‡­æ®ï¼ŒåŒ…å«:
- Supabase URL
- Supabase Anon Key

## æ³¨æ„äº‹é¡¹

1. **å‘åå…¼å®¹**: æ‰€æœ‰å·¥ä½œæµä¿æŒåŸæœ‰çš„APIæ¥å£ä¸å˜
2. **æ•°æ®æ ¼å¼**: è¾“å…¥è¾“å‡ºæ•°æ®æ ¼å¼ä¿æŒä¸€è‡´
3. **é”™è¯¯å¤„ç†**: ä¿ç•™äº†åŸæœ‰çš„é”™è¯¯å¤„ç†é€»è¾‘
4. **æ€§èƒ½**: å¯èƒ½éœ€è¦æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒæ•´æŸ¥è¯¢æ¡ä»¶å’Œè¿”å›å­—æ®µ

## ä¸‹ä¸€æ­¥å»ºè®®

1. **ç›‘æ§**: éƒ¨ç½²åç›‘æ§å·¥ä½œæµæ‰§è¡Œæƒ…å†µ
2. **ä¼˜åŒ–**: æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
3. **æ‰©å±•**: è€ƒè™‘æ·»åŠ æ›´å¤šåŸºäºSupabaseçš„åŠŸèƒ½
4. **å¤‡ä»½**: å®šæœŸå¤‡ä»½å·¥ä½œæµé…ç½®

---
æ›´æ–°æ—¶é—´: 2025-01-29
æ›´æ–°äººå‘˜: CodeBuddy AI Assistant