import{u as H,a as L,b as P,r as y,h as q,c as a,o as c,d as u,e,f as s,w as o,g as m,t as v,F as C,i as j,j as G,k as J,E as b,l as x,n as Q}from"./index-5350fb2a.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";const X={class:"dashboard-container"},Y={class:"header"},Z={class:"header-right"},ee={class:"user-info"},te={class:"username"},se={class:"main-content"},oe={class:"content-grid"},ne={class:"card okr-card fade-in-up"},ae={class:"card-header"},le={class:"card-content"},de={key:0,class:"okr-form"},ie={key:1,class:"okr-display"},re={class:"okr-header"},ce={class:"okr-item"},ue={class:"card chat-card fade-in-up"},_e={class:"card-header"},me={class:"card-content"},ve={class:"chat-container"},pe={class:"message-bubble"},he={class:"chat-input"},fe={class:"card history-card fade-in-up"},ye={class:"card-header"},be={class:"card-content"},ke={class:"history-list"},we=["onClick"],ge={class:"history-date"},Re={class:"history-preview"},Ce={__name:"Dashboard",setup(je){const V=H(),p=L(),l=P({objective:"",keyResult1:""}),i=y(null),r=y(""),h=y([{role:"assistant",content:"ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIå­¦ä¹ åŠ©æ‰‹ã€‚è¯·å…ˆè®¾å®šä½ çš„å­¦ä¹ ç›®æ ‡ï¼Œç„¶åŽæˆ‘å°±å¯ä»¥ä¸ºä½ æä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ æŒ‡å¯¼äº†ï¼"}]),A=y([{date:"2025-01-27",preview:"å…³äºŽæ•°æ®ç»“æž„çš„å­¦ä¹ è®¨è®º...",messages:[]}]),K=()=>{if(!l.objective.trim()){b.warning("è¯·è¾“å…¥å­¦ä¹ ç›®æ ‡");return}i.value={objective:l.objective,keyResults:[l.keyResult1].filter(d=>d.trim())},b.success("OKRä¿å­˜æˆåŠŸï¼"),l.objective="",l.keyResult1=""},D=()=>{i.value&&(l.objective=i.value.objective,l.keyResult1=i.value.keyResults[0]||"",i.value=null)},g=async()=>{if(!r.value.trim())return;const d={role:"user",content:r.value};h.value.push(d);const t=await M(r.value);h.value.push({role:"assistant",content:t}),r.value=""},M=async d=>(await new Promise(t=>setTimeout(t,1e3)),d.includes("ä»Šå¤©")&&d.includes("åšä»€ä¹ˆ")?i.value?`åŸºäºŽä½ çš„OKRç›®æ ‡"${i.value.objective}"ï¼Œå»ºè®®ä»Šå¤©å®Œæˆç›¸å…³ä»»åŠ¡ï¼`:"è¯·å…ˆè®¾å®šä½ çš„å­¦ä¹ ç›®æ ‡ï¼Œè¿™æ ·æˆ‘æ‰èƒ½ä¸ºä½ æŽ¨èåˆé€‚çš„ä»»åŠ¡ï¼":"æˆ‘ç†è§£ä½ çš„é—®é¢˜ã€‚ä½œä¸ºä½ çš„AIå­¦ä¹ åŠ©æ‰‹ï¼Œæˆ‘å¯ä»¥å¸®ä½ è§£ç­”å­¦ä¹ ç–‘é—®ï¼"),O=d=>{b.info("åŠ è½½èŠå¤©è®°å½•åŠŸèƒ½å¼€å‘ä¸­...")},B=async d=>{if(d==="logout")try{await J.confirm("ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),p.logout(),b.success("å·²é€€å‡ºç™»å½•"),V.push("/auth")}catch{}};return q(()=>{p.initAuth()}),(d,t)=>{const I=a("el-avatar"),E=a("ArrowDown"),f=a("el-icon"),S=a("el-dropdown-item"),T=a("el-dropdown-menu"),F=a("el-dropdown"),N=a("Aim"),k=a("el-input"),R=a("el-form-item"),w=a("el-button"),U=a("el-form"),z=a("ChatDotRound"),$=a("Clock");return c(),u("div",X,[e("header",Y,[t[4]||(t[4]=e("div",{class:"header-left"},[e("div",{class:"logo"},"ðŸŒŸ å¯æ˜Žæ˜Ÿ")],-1)),e("div",Z,[s(F,{onCommand:B},{dropdown:o(()=>[s(T,null,{default:o(()=>[s(S,{command:"logout"},{default:o(()=>t[3]||(t[3]=[m("é€€å‡ºç™»å½•",-1)])),_:1,__:[3]})]),_:1})]),default:o(()=>{var n,_;return[e("div",ee,[s(I,{src:(n=x(p).user)==null?void 0:n.avatar,size:"small"},null,8,["src"]),e("span",te,v((_=x(p).user)==null?void 0:_.name),1),s(f,null,{default:o(()=>[s(E)]),_:1})])]}),_:1})])]),e("main",se,[e("div",oe,[e("div",ne,[e("div",ae,[s(f,{class:"card-icon"},{default:o(()=>[s(N)]),_:1}),t[5]||(t[5]=e("h3",null,"å­¦ä¹ ç›®æ ‡ç®¡ç†",-1))]),e("div",le,[i.value?(c(),u("div",ie,[e("div",re,[t[8]||(t[8]=e("h4",null,"å½“å‰OKR",-1)),s(w,{type:"text",onClick:D},{default:o(()=>t[7]||(t[7]=[m("ç¼–è¾‘",-1)])),_:1,__:[7]})]),e("div",ce,[t[9]||(t[9]=e("strong",null,"ç›®æ ‡ï¼š",-1)),m(v(i.value.objective),1)])])):(c(),u("div",de,[s(U,{model:l,"label-position":"top"},{default:o(()=>[s(R,{label:"æœ¬å‘¨å­¦ä¹ ç›®æ ‡"},{default:o(()=>[s(k,{modelValue:l.objective,"onUpdate:modelValue":t[0]||(t[0]=n=>l.objective=n),placeholder:"ä¾‹å¦‚ï¼šæŽŒæ¡æ•°æ®ç»“æž„åŸºç¡€æ¦‚å¿µ",type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),s(R,{label:"å…³é”®ç»“æžœ"},{default:o(()=>[s(k,{modelValue:l.keyResult1,"onUpdate:modelValue":t[1]||(t[1]=n=>l.keyResult1=n),placeholder:"å…³é”®ç»“æžœ1",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),s(w,{type:"primary",onClick:K,style:{width:"100%"}},{default:o(()=>t[6]||(t[6]=[m(" ä¿å­˜OKR ",-1)])),_:1,__:[6]})]),_:1})]),_:1},8,["model"])]))])]),e("div",ue,[e("div",_e,[s(f,{class:"card-icon"},{default:o(()=>[s(z)]),_:1}),t[10]||(t[10]=e("h3",null,"AIå­¦ä¹ åŠ©æ‰‹",-1))]),e("div",me,[e("div",ve,[e("div",{class:"chat-messages",ref_key:"chatMessages",ref:h},[(c(!0),u(C,null,j(h.value,(n,_)=>(c(),u("div",{key:_,class:Q(["message",n.role])},[e("div",pe,v(n.content),1)],2))),128))],512),e("div",he,[s(k,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=n=>r.value=n),placeholder:"å‘AIåŠ©æ‰‹æé—®ï¼Œä¾‹å¦‚ï¼šä»Šå¤©æˆ‘è¯¥åšä»€ä¹ˆï¼Ÿ",onKeyup:G(g,["enter"])},{append:o(()=>[s(w,{type:"primary",onClick:g,disabled:!r.value.trim()},{default:o(()=>t[11]||(t[11]=[m(" å‘é€ ",-1)])),_:1,__:[11]},8,["disabled"])]),_:1},8,["modelValue"])])])])]),e("div",fe,[e("div",ye,[s(f,{class:"card-icon"},{default:o(()=>[s($)]),_:1}),t[12]||(t[12]=e("h3",null,"èŠå¤©åŽ†å²",-1))]),e("div",be,[e("div",ke,[(c(!0),u(C,null,j(A.value,(n,_)=>(c(),u("div",{key:_,class:"history-item",onClick:xe=>O()},[e("div",ge,v(n.date),1),e("div",Re,v(n.preview),1)],8,we))),128))])])])])])])}}},Ke=W(Ce,[["__scopeId","data-v-0500ebb2"]]);export{Ke as default};
